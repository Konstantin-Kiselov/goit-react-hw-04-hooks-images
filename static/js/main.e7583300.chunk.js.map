{"version":3,"sources":["components/Container/Container.module.css","components/Button/Button.module.css","components/App.module.css","components/Searchbar/Searchbar.module.css","components/Container/Container.jsx","components/Searchbar/Searchbar.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","services/images-api.jsx","components/App.jsx","index.js","components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css"],"names":["module","exports","Container","children","className","s","container","Searchbar","onSubmit","useState","query","setQuery","searchbar","searchForm","event","preventDefault","trim","toLowerCase","alert","type","searchFormButton","searchFormButtonLabel","searchFormInput","autoComplete","autoFocus","placeholder","value","onChange","currentTarget","Button","handleClickBtn","button","onClick","modalRoot","document","querySelector","Modal","onClose","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","createPortal","overlay","target","modal","ImageGalleryItem","src","tags","dataSrc","imageGalleryItem","alt","imageGalleryItemImage","ImageGallery","gallery","onClickImg","imageGallery","map","id","webformatURL","largeImageURL","api","fetchImages","page","url","fetch","then","response","json","App","setGallery","status","setStatus","setPage","modalImg","setModalImg","modalAlt","setModalAlt","showModal","setShowModal","error","setError","imagesAPI","images","hits","length","state","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","handleSubmitInput","newQuery","message","imgForModal","dataset","altForModal","loader","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e7583300.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3qZ38\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__1skWU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"App_loader__2lKOU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__30--z\",\"searchForm\":\"Searchbar_searchForm__hO3nS\",\"searchFormButton\":\"Searchbar_searchFormButton__1oiLt\",\"searchFormButtonLabel\":\"Searchbar_searchFormButtonLabel__1U9Tm\",\"searchFormInput\":\"Searchbar_searchFormInput__1L2dF\"};","import s from './Container.module.css';\r\n\r\nfunction Container({ children }) {\r\n  return <div className={s.container}>{children}</div>;\r\n}\r\n\r\nexport default Container;\r\n","import { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Searchbar.module.css';\r\n\r\nexport default function Searchbar({ onSubmit }) {\r\n  const [query, setQuery] = useState('');\r\n\r\n  const handleInputChange = event => {\r\n    setQuery(event.currentTarget.value);\r\n  };\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (query.trim() === '') {\r\n      alert('Введите слово для поиска');\r\n      return;\r\n    }\r\n\r\n    onSubmit(query.trim().toLowerCase());\r\n\r\n    setQuery('');\r\n  };\r\n\r\n  return (\r\n    <header className={s.searchbar}>\r\n      <form className={s.searchForm} onSubmit={handleSubmit}>\r\n        <button type=\"submit\" className={s.searchFormButton}>\r\n          <span className={s.searchFormButtonLabel}>Search</span>\r\n        </button>\r\n\r\n        <input\r\n          className={s.searchFormInput}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n          value={query}\r\n          onChange={handleInputChange}\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n","import PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nfunction Button({ handleClickBtn }) {\r\n  return (\r\n    <button className={s.button} onClick={handleClickBtn} type=\"button\">\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\nButton.propTypes = {\r\n  handleClickBtn: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import React, { useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default function Modal({ onClose, children }) {\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const handleKeyDown = event => {\r\n    if (event.code === 'Escape') {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const handleBackdropClick = event => {\r\n    if (event.target === event.currentTarget) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className={s.overlay} onClick={handleBackdropClick}>\r\n      <div className={s.modal}>\r\n        {children}\r\n        <button className={s.button} type=\"button\" onClick={onClose}>\r\n          X\r\n        </button>\r\n      </div>\r\n    </div>,\r\n    modalRoot,\r\n  );\r\n}\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n","import PropTypes from 'prop-types';\r\nimport s from './ImageGallery.module.css';\r\n\r\nfunction ImageGalleryItem({ src, tags, dataSrc, onClick }) {\r\n  return (\r\n    <li className={s.imageGalleryItem} onClick={onClick}>\r\n      <img\r\n        src={src}\r\n        data-src={dataSrc}\r\n        alt={tags}\r\n        className={s.imageGalleryItemImage}\r\n      />\r\n    </li>\r\n  );\r\n}\r\nImageGalleryItem.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  dataSrc: PropTypes.string.isRequired,\r\n  tags: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\nimport s from './ImageGallery.module.css';\r\n\r\nfunction ImageGallery({ gallery, onClickImg }) {\r\n  return (\r\n    <>\r\n      <ul className={s.imageGallery}>\r\n        {gallery.map(({ id, webformatURL, largeImageURL, tags }) => {\r\n          return (\r\n            <ImageGalleryItem\r\n              key={id}\r\n              src={webformatURL}\r\n              dataSrc={largeImageURL}\r\n              tags={tags}\r\n              onClick={onClickImg}\r\n            />\r\n          );\r\n        })}\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\nImageGallery.propTypes = {\r\n  gallery: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      webformatURL: PropTypes.string.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n      tags: PropTypes.string.isRequired,\r\n    }),\r\n  ),\r\n  onClickImg: PropTypes.func,\r\n};\r\n\r\nexport default ImageGallery;\r\n","const API_KEY = '23027480-c70d45ac3781d0e477b4a7117';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\nfunction fetchImages(query, page) {\r\n  const url = `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\r\n  return fetch(url).then(response => response.json());\r\n}\r\n\r\nconst api = { fetchImages };\r\n\r\nexport default api;\r\n\r\n// .then(response => {\r\n//     if (response.ok) {\r\n//         return response.json();\r\n//     }\r\n//     return Promise.reject(new Error(`Reload your page`))\r\n// })\r\n","import React, { useEffect, useState } from 'react';\r\nimport Container from './Container/Container';\r\nimport Searchbar from './Searchbar/Searchbar';\r\nimport Button from './Button/Button';\r\nimport Modal from './Modal/Modal';\r\nimport ImageGallery from './ImageGallery/ImageGallery';\r\nimport imagesAPI from '../services/images-api';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport s from './App.module.css';\r\n\r\nexport default function App() {\r\n  const [gallery, setGallery] = useState([]);\r\n  const [status, setStatus] = useState('idle');\r\n  const [query, setQuery] = useState('');\r\n  const [page, setPage] = useState(1);\r\n  const [modalImg, setModalImg] = useState('');\r\n  const [modalAlt, setModalAlt] = useState('');\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (query.trim() === '') {\r\n      return;\r\n    }\r\n\r\n    setStatus('pending');\r\n\r\n    imagesAPI\r\n      .fetchImages(query, page)\r\n      .then(({ hits }) => {\r\n        const images = hits.map(({ id, webformatURL, largeImageURL, tags }) => {\r\n          return { id, webformatURL, largeImageURL, tags };\r\n        });\r\n        // console.log(images);\r\n        if (images.length > 0) {\r\n          setGallery(state => [...state, ...images]);\r\n          setStatus('resolved');\r\n        } else {\r\n          alert(`По запросу ${query} ничего не найдено.`);\r\n          setStatus('idle');\r\n        }\r\n      })\r\n      .catch(error => {\r\n        setError(error);\r\n        setStatus('rejected');\r\n      })\r\n      .finally(() => {\r\n        if (page > 1) {\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: 'smooth',\r\n          });\r\n        }\r\n      });\r\n  }, [page, query]);\r\n\r\n  const handleSubmitInput = newQuery => {\r\n    if (newQuery !== query) {\r\n      setGallery([]);\r\n      setPage(1);\r\n      setQuery(newQuery);\r\n    }\r\n  };\r\n\r\n  const handleClickImg = event => {\r\n    const imgForModal = event.target.dataset.src;\r\n    const altForModal = event.target.alt;\r\n\r\n    setModalImg(imgForModal);\r\n    setModalAlt(altForModal);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleClickBtn = () => {\r\n    setPage(state => state + 1);\r\n    setStatus('pending');\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setShowModal(!showModal);\r\n  };\r\n\r\n  if (status === 'idle') {\r\n    return (\r\n      <Container>\r\n        <Searchbar onSubmit={handleSubmitInput} />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (status === 'rejected') {\r\n    return <h1>{error.message}</h1>;\r\n  }\r\n\r\n  if (status === 'resolved' || status === 'pending') {\r\n    return (\r\n      <>\r\n        {showModal && (\r\n          <Modal onClose={toggleModal}>\r\n            <img src={modalImg} alt={modalAlt} />\r\n          </Modal>\r\n        )}\r\n        <Container>\r\n          <Searchbar onSubmit={handleSubmitInput} />\r\n          {gallery.length > 0 && (\r\n            <ImageGallery onClickImg={handleClickImg} gallery={gallery} />\r\n          )}\r\n          {status === 'pending' ? (\r\n            <Loader\r\n              className={s.loader}\r\n              type=\"Circles\"\r\n              color=\"#00BFFF\"\r\n              height={80}\r\n              width={80}\r\n            />\r\n          ) : (\r\n            <Button handleClickBtn={handleClickBtn} />\r\n          )}\r\n        </Container>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__2F14-\",\"imageGalleryItem\":\"ImageGallery_imageGalleryItem__3KzXD\",\"imageGalleryItemImage\":\"ImageGallery_imageGalleryItemImage__3s_xn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2wWek\",\"modal\":\"Modal_modal__Y4IYu\",\"button\":\"Modal_button__1Rs1g\"};"],"sourceRoot":""}